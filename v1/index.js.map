{"version":3,"sources":["intro.js","util.js","main.js"],"names":["$","parseFormula","e","replace","match","p1","p2","p","charAt","slice","each","wikipedia","block","url","haveToSwap","dir","i","rcOrd","rcDir","expandTable","addCell","callOrd","insertNormal","insertSwapped","makeCell","j","cellHtml","expandData","html","cell","addCol","tbodyNode","children","oldRow","this","newCell","append","eq","before","addRow","newRow","oldCell","isExpanded","tableNode","find","text","attr","off","click","contractTable","removeCol","remove","removeRow","after","swapChildren","node","c1","c2","n","length","c2p","prev"],"mappings":"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","file":"index.js","sourcesContent":["$(function(){\r\n","function parseFormula(e) {\r\n\treturn e\r\n\t\t.replace(/=/g,' = ')\r\n\t\t.replace(/(\\(.*\\)|\\w+)\\/(\\(.*\\)|\\w+)/,function(match,p1,p2){\r\n\t\t\tfunction e(p) {\r\n\t\t\t\tif (p.charAt(0)=='(') {\r\n\t\t\t\t\treturn \"<span class='aux'>(</span>\"+p.slice(1,-1)+\"<span class='aux'>)</span>\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn p;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn \"<span class='sfrac'>\"+\r\n\t\t\t\t\"<span class='num'>\"+e(p1)+\"</span>\"+\r\n\t\t\t\t\"<span class='aux'>/</span>\"+\r\n\t\t\t\t\"<span class='den'>\"+e(p2)+\"</span>\"+\r\n\t\t\t\"</span>\";\r\n\t\t})\r\n\t\t.replace(/\\bTP\\b/g,\"<span class='actual-true'>T</span><span class='predicted-true'>P</span>\")\r\n\t\t.replace(/\\bFP\\b/g,\"<span class='actual-false'>F</span><span class='predicted-true'>P</span>\")\r\n\t\t.replace(/\\bFN\\b/g,\"<span class='actual-true'>F</span><span class='predicted-false'>N</span>\")\r\n\t\t.replace(/\\bTN\\b/g,\"<span class='actual-false'>T</span><span class='predicted-false'>N</span>\")\r\n\t;\r\n}\r\n","$('table.statistics-confusion').each(function(){\r\n\tvar tableNode=$(this);\r\n\tvar tbodyNode=tableNode.children('tbody');\r\n\tvar rcDir=0; // outcome headers on top?\r\n\tvar rcOrd=[0,0]; // outcomes swapped?, conditions swapped?\r\n\tvar isExpanded=false;\r\n\t//function wikipedia(block,url) {\r\n\t//\tif (url===undefined) url=\"https://en.wikipedia.org/wiki/\"+block.replace(/ /g,'_');\r\n\tfunction wikipedia(block) {\r\n\t\turl=\"https://en.wikipedia.org/wiki/\"+block.replace(/ /g,'_');\r\n\t\treturn \"<a href='\"+url+\"'>\"+block+\"</a>\";\r\n\t}\r\n\tvar expandData=[\r\n\t\t[ // new row\r\n\t\t\t\"<div class='formula'>\"+parseFormula(\"(FN+TN)/(TP+FP+FN+TN)\")+\"</div>\",\r\n\t\t\t\"<div class='label'>\"+wikipedia(\"False negative rate\")+\"</div><div class='formula'>\"+parseFormula(\"FNR=FN/(TP+FN)\")+\"</div>\",\r\n\t\t\t\"<div class='label'>\"+wikipedia(\"False positive rate\")+\"</div><div class='formula'>\"+parseFormula(\"FPR=FP/(FP+TN)\")+\"</div>\",\r\n\t\t\t\"<div class='label'>Overall error rate</div><div class='formula'>\"+parseFormula(\"(FP+FN)/(TP+FP+FN+TN)\")+\"</div>\",\r\n\t\t\t\"\" // not used\r\n\t\t],[ // new col\r\n\t\t\t\"<div class='formula'>\"+parseFormula(\"(FP+TN)/(TP+FP+FN+TN)\")+\"</div>\",\r\n\t\t\t\"<div class='label'>\"+wikipedia(\"False discovery rate\")+\"</div><div class='formula'>\"+parseFormula(\"FDR=FP/(TP+FP)\")+\"</div>\",\r\n\t\t\t\"<div class='label'>\"+wikipedia(\"False omission rate\")+\"</div><div class='formula'>\"+parseFormula(\"FOR=FN/(FN+TN)\")+\"</div>\",\r\n\t\t\t\"<div class='label'>\"+wikipedia(\"Positive likelihood ratio\")+\"</div><div class='formula'>\"+parseFormula(\"(LR+)=TPR/FPR\")+\"</div>\",\r\n\t\t\t\"<div class='label'>\"+wikipedia(\"Negative likelihood ratio\")+\"</div><div class='formula'>\"+parseFormula(\"(LR-)=FNR/TNR\")+\"</div>\"\r\n\t\t]\r\n\t];\r\n\tfunction haveToSwap(dir,i) {\r\n\t\tif (i==1 || i==2) {\r\n\t\t\treturn ((i-1)^rcOrd[0]^rcOrd[1])&1;\r\n\t\t} else {\r\n\t\t\trcOrd[rcDir^dir]&1;\r\n\t\t}\r\n\t}\r\n\tfunction expandTable() {\r\n\t\tfunction addCell(callOrd,dir,i,insertNormal,insertSwapped) {\r\n\t\t\tfunction makeCell() {\r\n\t\t\t\tvar j=i;\r\n\t\t\t\tif ((j==1 || j==2) && rcOrd[rcDir^dir^1]) {\r\n\t\t\t\t\tj^=1^2;\r\n\t\t\t\t} else if (callOrd && (j==3 || j==4) && rcOrd[rcDir^dir^1]) {\r\n\t\t\t\t\tj^=3^4;\r\n\t\t\t\t}\r\n\t\t\t\tvar cellHtml=expandData[rcDir^dir][j];\r\n\t\t\t\treturn $(\"<td>\").html(cellHtml);\r\n\t\t\t}\r\n\t\t\tvar cell=makeCell();\r\n\t\t\tif (haveToSwap(dir,i)) {\r\n\t\t\t\tinsertSwapped(cell);\r\n\t\t\t} else {\r\n\t\t\t\tinsertNormal(cell);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction addCol(callOrd) {\r\n\t\t\ttbodyNode.children().each(function(i){\r\n\t\t\t\tvar oldRow=$(this);\r\n\t\t\t\taddCell(callOrd,1,i,function(newCell){\r\n\t\t\t\t\toldRow.append(newCell);\r\n\t\t\t\t},function(newCell){\r\n\t\t\t\t\toldRow.children().eq(-1).before(newCell);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tfunction addRow(callOrd) {\r\n\t\t\tvar newRow=$(\"<tr>\");\r\n\t\t\ttbodyNode.append(newRow);\r\n\t\t\ttbodyNode.children().eq(-2).children().each(function(i){\r\n\t\t\t\tvar oldCell=$(this);\r\n\t\t\t\taddCell(callOrd,0,i,function(newCell){\r\n\t\t\t\t\tnewRow.append(newCell);\r\n\t\t\t\t},function(newCell){\r\n\t\t\t\t\toldCell.before(newCell);\r\n\t\t\t\t\tnewRow.append(oldCell);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (rcDir) {\r\n\t\t\taddCol(0);\r\n\t\t\taddRow(1);\r\n\t\t} else {\r\n\t\t\taddRow(0);\r\n\t\t\taddCol(1);\r\n\t\t}\r\n\t\tisExpanded=true;\r\n\t\ttableNode.find('button.add-r, button.add-c').text('−').attr('title','contract table').off().click(contractTable);\r\n\t}\r\n\tfunction contractTable() {\r\n\t\tfunction removeCol() {\r\n\t\t\ttbodyNode.children().each(function(i){\r\n\t\t\t\tvar oldRow=$(this);\r\n\t\t\t\toldRow.children().eq(haveToSwap(1,i)?-2:-1).remove();\r\n\t\t\t});\r\n\t\t}\r\n\t\tfunction removeRow() {\r\n\t\t\tvar oldRow=tbodyNode.children().eq(-2);\r\n\t\t\tvar newRow=tbodyNode.children().eq(-1);\r\n\t\t\tnewRow.children().each(function(i){\r\n\t\t\t\tif (haveToSwap(0,i)) {\r\n\t\t\t\t\tvar oldCell=$(this);\r\n\t\t\t\t\tvar newCell=oldRow.children().eq(i);\r\n\t\t\t\t\tnewCell.after(oldCell).remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tnewRow.remove();\r\n\t\t}\r\n\t\tif (rcDir) {\r\n\t\t\tremoveRow();\r\n\t\t\tremoveCol();\r\n\t\t} else {\r\n\t\t\tremoveCol();\r\n\t\t\tremoveRow();\r\n\t\t}\r\n\t\tisExpanded=false;\r\n\t\ttableNode.find('button.add-r, button.add-c').text('+').attr('title','expand table').off().click(expandTable);\r\n\t}\r\n\tfunction swapChildren(node,i) {\r\n\t\tvar c1=node.children().eq(i);\r\n\t\tvar c2=node.children().eq(i+1);\r\n\t\tc1.before(c2);\r\n\t}\r\n\ttableNode.children('caption').append(\r\n\t\t$(\"<button type='button' class='swap-rc' title='swap rows and columns'>↻</button>\").click(function(){\r\n\t\t\trcDir^=1;\r\n\t\t\tvar n=tbodyNode.children().length;\r\n\t\t\tfor (var i=0;i<n;i++) {\r\n\t\t\t\tfor (var j=0;j<i;j++) {\r\n\t\t\t\t\tvar c1=tbodyNode.children().eq(i).children().eq(j);\r\n\t\t\t\t\tvar c2=tbodyNode.children().eq(j).children().eq(i);\r\n\t\t\t\t\tvar c2p=c2.prev();\r\n\t\t\t\t\tc1.after(c2);\r\n\t\t\t\t\tc2p.after(c1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t).append(\r\n\t\t$(\"<button type='button' class='swap-c' title='swap columns'>↔</button>\").click(function(){\r\n\t\t\trcOrd[rcDir^1]^=1;\r\n\t\t\ttbodyNode.children().each(function(){\r\n\t\t\t\tswapChildren($(this),1);\r\n\t\t\t\tif (!isExpanded) return;\r\n\t\t\t\tswapChildren($(this),3);\r\n\t\t\t});\r\n\t\t})\r\n\t).append(\r\n\t\t$(\"<button type='button' class='swap-r' title='swap rows'>↕</button>\").click(function(){\r\n\t\t\trcOrd[rcDir]^=1;\r\n\t\t\tswapChildren(tbodyNode,1);\r\n\t\t\tif (!isExpanded) return;\r\n\t\t\tswapChildren(tbodyNode,3);\r\n\t\t})\r\n\t).append(\r\n\t\t$(\"<button type='button' class='add-c' title='expand table'>+</button>\").click(expandTable)\r\n\t).append(\r\n\t\t$(\"<button type='button' class='add-r' title='expand table'>+</button>\").click(expandTable)\r\n\t)\r\n});\r\n"],"sourceRoot":"/source/"}
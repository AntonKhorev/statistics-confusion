{"version":3,"sources":["index.js"],"names":["$","each","wikipedia","block","url","replace","haveToSwap","dir","i","rcOrd","rcDir","expandTable","addCell","callOrd","insertNormal","insertSwapped","makeCell","j","cellHtml","expandData","html","cell","addCol","tbodyNode","children","oldRow","this","newCell","append","eq","before","addRow","newRow","oldCell","isExpanded","tableNode","find","text","attr","off","click","contractTable","removeCol","remove","removeRow","after","swapChildren","node","c1","c2","TP","FP","FN","TN","n","length","c2p","prev"],"mappings":"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","file":"index.js","sourcesContent":["$(function(){\r\n\t$('table.statistics-confusion').each(function(){\r\n\t\tvar tableNode=$(this);\r\n\t\tvar tbodyNode=tableNode.children('tbody');\r\n\t\tvar rcDir=0; // outcome headers on top?\r\n\t\tvar rcOrd=[0,0]; // outcomes swapped?, conditions swapped?\r\n\t\tvar isExpanded=false;\r\n\t\t//function wikipedia(block,url) {\r\n\t\t//\tif (url===undefined) url=\"https://en.wikipedia.org/wiki/\"+block.replace(/ /g,'_');\r\n\t\tfunction wikipedia(block) {\r\n\t\t\turl=\"https://en.wikipedia.org/wiki/\"+block.replace(/ /g,'_');\r\n\t\t\treturn \"<a href='\"+url+\"'>\"+block+\"</a>\";\r\n\t\t}\r\n\t\tvar TP=\"<span class='actual-true'>T</span><span class='predicted-true'>P</span>\";\r\n\t\tvar FP=\"<span class='actual-false'>F</span><span class='predicted-true'>P</span>\";\r\n\t\tvar FN=\"<span class='actual-true'>F</span><span class='predicted-false'>N</span>\";\r\n\t\tvar TN=\"<span class='actual-false'>T</span><span class='predicted-false'>N</span>\";\r\n\t\tvar expandData=[\r\n\t\t\t[ // new row\r\n\t\t\t\t\"<div class='formula'>(\"+FN+\"+\"+TN+\")/(\"+TP+\"+\"+FP+\"+\"+FN+\"+\"+TN+\")</div>\",\r\n\t\t\t\t\"<div class='label'>\"+wikipedia(\"False negative rate\")+\"</div><div class='formula'>FNR=\"+FN+\"/(\"+TP+\"+\"+FN+\")</div>\",\r\n\t\t\t\t\"<div class='label'>\"+wikipedia(\"False positive rate\")+\"</div><div class='formula'>FPR=\"+FP+\"/(\"+FP+\"+\"+TN+\")</div>\",\r\n\t\t\t\t\"<div class='label'>Overall error rate</div><div class='formula'>(\"+FP+\"+\"+FN+\")/(\"+TP+\"+\"+FP+\"+\"+FN+\"+\"+TN+\")</div>\",\r\n\t\t\t\t\"\" // not used\r\n\t\t\t],[ // new col\r\n\t\t\t\t\"<div class='formula'>(\"+FP+\"+\"+TN+\")/(\"+TP+\"+\"+FP+\"+\"+FN+\"+\"+TN+\")</div>\",\r\n\t\t\t\t\"<div class='label'>\"+wikipedia(\"False discovery rate\")+\"</div><div class='formula'>FDR=\"+FP+\"/(\"+TP+\"+\"+FP+\")</div>\",\r\n\t\t\t\t\"<div class='label'>\"+wikipedia(\"False omission rate\")+\"</div><div class='formula'>FOR=\"+FN+\"/(\"+FN+\"+\"+TN+\")</div>\",\r\n\t\t\t\t\"<div class='label'>\"+wikipedia(\"Positive likelihood ratio\")+\"</div><div class='formula'>(LR+)=TPR/FPR</div>\",\r\n\t\t\t\t\"<div class='label'>\"+wikipedia(\"Negative likelihood ratio\")+\"</div><div class='formula'>(LR-)=FNR/TNR</div>\"\r\n\t\t\t]\r\n\t\t];\r\n\t\tfunction haveToSwap(dir,i) {\r\n\t\t\tif (i==1 || i==2) {\r\n\t\t\t\treturn ((i-1)^rcOrd[0]^rcOrd[1])&1;\r\n\t\t\t} else {\r\n\t\t\t\trcOrd[rcDir^dir]&1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction expandTable() {\r\n\t\t\tfunction addCell(callOrd,dir,i,insertNormal,insertSwapped) {\r\n\t\t\t\tfunction makeCell() {\r\n\t\t\t\t\tvar j=i;\r\n\t\t\t\t\tif ((j==1 || j==2) && rcOrd[rcDir^dir^1]) {\r\n\t\t\t\t\t\tj^=1^2;\r\n\t\t\t\t\t} else if (callOrd && (j==3 || j==4) && rcOrd[rcDir^dir^1]) {\r\n\t\t\t\t\t\tj^=3^4;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar cellHtml=expandData[rcDir^dir][j];\r\n\t\t\t\t\treturn $(\"<td>\").html(cellHtml);\r\n\t\t\t\t}\r\n\t\t\t\tvar cell=makeCell();\r\n\t\t\t\tif (haveToSwap(dir,i)) {\r\n\t\t\t\t\tinsertSwapped(cell);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinsertNormal(cell);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction addCol(callOrd) {\r\n\t\t\t\ttbodyNode.children().each(function(i){\r\n\t\t\t\t\tvar oldRow=$(this);\r\n\t\t\t\t\taddCell(callOrd,1,i,function(newCell){\r\n\t\t\t\t\t\toldRow.append(newCell);\r\n\t\t\t\t\t},function(newCell){\r\n\t\t\t\t\t\toldRow.children().eq(-1).before(newCell);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tfunction addRow(callOrd) {\r\n\t\t\t\tvar newRow=$(\"<tr>\");\r\n\t\t\t\ttbodyNode.append(newRow);\r\n\t\t\t\ttbodyNode.children().eq(-2).children().each(function(i){\r\n\t\t\t\t\tvar oldCell=$(this);\r\n\t\t\t\t\taddCell(callOrd,0,i,function(newCell){\r\n\t\t\t\t\t\tnewRow.append(newCell);\r\n\t\t\t\t\t},function(newCell){\r\n\t\t\t\t\t\toldCell.before(newCell);\r\n\t\t\t\t\t\tnewRow.append(oldCell);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (rcDir) {\r\n\t\t\t\taddCol(0);\r\n\t\t\t\taddRow(1);\r\n\t\t\t} else {\r\n\t\t\t\taddRow(0);\r\n\t\t\t\taddCol(1);\r\n\t\t\t}\r\n\t\t\tisExpanded=true;\r\n\t\t\ttableNode.find('button.add-r, button.add-c').text('−').attr('title','contract table').off().click(contractTable);\r\n\t\t}\r\n\t\tfunction contractTable() {\r\n\t\t\tfunction removeCol() {\r\n\t\t\t\ttbodyNode.children().each(function(i){\r\n\t\t\t\t\tvar oldRow=$(this);\r\n\t\t\t\t\toldRow.children().eq(haveToSwap(1,i)?-2:-1).remove();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tfunction removeRow() {\r\n\t\t\t\tvar oldRow=tbodyNode.children().eq(-2);\r\n\t\t\t\tvar newRow=tbodyNode.children().eq(-1);\r\n\t\t\t\tnewRow.children().each(function(i){\r\n\t\t\t\t\tif (haveToSwap(0,i)) {\r\n\t\t\t\t\t\tvar oldCell=$(this);\r\n\t\t\t\t\t\tvar newCell=oldRow.children().eq(i);\r\n\t\t\t\t\t\tnewCell.after(oldCell).remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tnewRow.remove();\r\n\t\t\t}\r\n\t\t\tif (rcDir) {\r\n\t\t\t\tremoveRow();\r\n\t\t\t\tremoveCol();\r\n\t\t\t} else {\r\n\t\t\t\tremoveCol();\r\n\t\t\t\tremoveRow();\r\n\t\t\t}\r\n\t\t\tisExpanded=false;\r\n\t\t\ttableNode.find('button.add-r, button.add-c').text('+').attr('title','expand table').off().click(expandTable);\r\n\t\t}\r\n\t\tfunction swapChildren(node,i) {\r\n\t\t\tvar c1=node.children().eq(i);\r\n\t\t\tvar c2=node.children().eq(i+1);\r\n\t\t\tc1.before(c2);\r\n\t\t}\r\n\t\ttableNode.children('caption').append(\r\n\t\t\t$(\"<button type='button' class='swap-rc' title='swap rows and columns'>↻</button>\").click(function(){\r\n\t\t\t\trcDir^=1;\r\n\t\t\t\tvar n=tbodyNode.children().length;\r\n\t\t\t\tfor (var i=0;i<n;i++) {\r\n\t\t\t\t\tfor (var j=0;j<i;j++) {\r\n\t\t\t\t\t\tvar c1=tbodyNode.children().eq(i).children().eq(j);\r\n\t\t\t\t\t\tvar c2=tbodyNode.children().eq(j).children().eq(i);\r\n\t\t\t\t\t\tvar c2p=c2.prev();\r\n\t\t\t\t\t\tc1.after(c2);\r\n\t\t\t\t\t\tc2p.after(c1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t).append(\r\n\t\t\t$(\"<button type='button' class='swap-c' title='swap columns'>↔</button>\").click(function(){\r\n\t\t\t\trcOrd[rcDir^1]^=1;\r\n\t\t\t\ttbodyNode.children().each(function(){\r\n\t\t\t\t\tswapChildren($(this),1);\r\n\t\t\t\t\tif (!isExpanded) return;\r\n\t\t\t\t\tswapChildren($(this),3);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t).append(\r\n\t\t\t$(\"<button type='button' class='swap-r' title='swap rows'>↕</button>\").click(function(){\r\n\t\t\t\trcOrd[rcDir]^=1;\r\n\t\t\t\tswapChildren(tbodyNode,1);\r\n\t\t\t\tif (!isExpanded) return;\r\n\t\t\t\tswapChildren(tbodyNode,3);\r\n\t\t\t})\r\n\t\t).append(\r\n\t\t\t$(\"<button type='button' class='add-c' title='expand table'>+</button>\").click(expandTable)\r\n\t\t).append(\r\n\t\t\t$(\"<button type='button' class='add-r' title='expand table'>+</button>\").click(expandTable)\r\n\t\t)\r\n\t});\r\n});\r\n"],"sourceRoot":"/source/"}
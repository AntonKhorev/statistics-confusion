{"version":3,"sources":["intro.js","util.js","main.js"],"names":["$","parseFormula","e","replace","match","p1","p2","p","charAt","slice","vis","each","wikipedia","block","url","haveToSwap","dir","i","rcOrd","rcDir","expandTable","addCell","callOrd","insertNormal","insertSwapped","makeCell","j","cellData","expandData","cell","html","attr","addCol","tbodyNode","children","oldRow","this","newCell","append","eq","before","addRow","newRow","oldCell","isExpanded","tableNode","find","text","off","click","contractTable","removeCol","remove","removeRow","after","swapChildren","node","c1","c2","drawSwapIcon","angle","n","length","c2p","prev","on","addClass","removeClass"],"mappings":"AAAAA,EAAA,WCAA,QAAAC,GAAAC,GACA,MAAA,wBAAAA,EACAC,QAAA,KAAA,OACAA,QAAA,6BAAA,SAAAC,EAAAC,EAAAC,GACA,QAAAJ,GAAAK,GACA,MAAA,KAAAA,EAAAC,OAAA,GACA,6BAAAD,EAAAE,MAAA,EAAA,IAAA,6BAEAF,EAGA,MAAA,yCACAL,EAAAG,GAAA,sDAEAH,EAAAI,GAAA,mBAGAH,QAAA,cAAA,SAAAC,GACA,GAAAM,GAAAN,CAMA,OALA,OAAAA,EACAM,EAAA,iBACA,OAAAN,IACAM,EAAA,kBAEA,iCAAAN,EAAA,KAAAM,EAAA,YAEA,SC1BAV,EAAA,8BAAAW,KAAA,WAQA,QAAAC,GAAAC,GAEA,MADAC,KAAA,iCAAAD,EAAAV,QAAA,KAAA,KACA,YAAAW,IAAA,KAAAD,EAAA,OAiBA,QAAAE,GAAAC,EAAAC,GACA,MAAA,IAAAA,GAAA,GAAAA,EACA,GAAAA,EAAA,EAAAC,EAAA,GAAAA,EAAA,IAEA,EAAAA,EAAAC,EAAAH,GAGA,QAAAI,KACA,QAAAC,GAAAC,EAAAN,EAAAC,EAAAM,EAAAC,GACA,QAAAC,KACA,GAAAC,GAAAT,CACA,IAAAS,GAAA,GAAAA,IAAAR,EAAAC,EAAAH,EAAA,GAEAM,IAAA,GAAAI,GAAA,GAAAA,IAAAR,EAAAC,EAAAH,EAAA,KACAU,GAAA,GAFAA,GAAA,CAIA,IAAAC,GAAAC,EAAAT,EAAAH,GAAAU,GACAG,EAAA7B,EAAA,QAAA8B,KAAAH,EAAA,GAEA,OADA,QAAAA,EAAA,IAAAE,EAAAE,KAAA,YAAAJ,EAAA,IACAE,EAEA,GAAAA,GAAAJ,GACAV,GAAAC,EAAAC,GACAO,EAAAK,GAEAN,EAAAM,GAGA,QAAAG,GAAAV,GACAW,EAAAC,WAAAvB,KAAA,SAAAM,GACA,GAAAkB,GAAAnC,EAAAoC,KACAf,GAAAC,EAAA,EAAAL,EAAA,SAAAoB,GACAF,EAAAG,OAAAD,IACA,SAAAA,GACAF,EAAAD,WAAAK,GAAA,IAAAC,OAAAH,OAIA,QAAAI,GAAAnB,GACA,GAAAoB,GAAA1C,EAAA,OACAiC,GAAAK,OAAAI,GACAT,EAAAC,WAAAK,GAAA,IAAAL,WAAAvB,KAAA,SAAAM,GACA,GAAA0B,GAAA3C,EAAAoC,KACAf,GAAAC,EAAA,EAAAL,EAAA,SAAAoB,GACAK,EAAAJ,OAAAD,IACA,SAAAA,GACAM,EAAAH,OAAAH,GACAK,EAAAJ,OAAAK,OAIAxB,GACAa,EAAA,GACAS,EAAA,KAEAA,EAAA,GACAT,EAAA,IAEAY,GAAA,EACAC,EAAAC,KAAA,8BAAAC,KAAA,KAAAhB,KAAA,QAAA,kBAAAiB,MAAAC,MAAAC,GAEA,QAAAA,KACA,QAAAC,KACAlB,EAAAC,WAAAvB,KAAA,SAAAM,GACA,GAAAkB,GAAAnC,EAAAoC,KACAD,GAAAD,WAAAK,GAAAxB,EAAA,EAAAE,GAAA,GAAA,IAAAmC,WAGA,QAAAC,KACA,GAAAlB,GAAAF,EAAAC,WAAAK,GAAA,IACAG,EAAAT,EAAAC,WAAAK,GAAA,GACAG,GAAAR,WAAAvB,KAAA,SAAAM,GACA,GAAAF,EAAA,EAAAE,GAAA,CACA,GAAA0B,GAAA3C,EAAAoC,MACAC,EAAAF,EAAAD,WAAAK,GAAAtB,EACAoB,GAAAiB,MAAAX,GAAAS,YAGAV,EAAAU,SAEAjC,GACAkC,IACAF,MAEAA,IACAE,KAEAT,GAAA,EACAC,EAAAC,KAAA,8BAAAC,KAAA,KAAAhB,KAAA,QAAA,gBAAAiB,MAAAC,MAAA7B,GAEA,QAAAmC,GAAAC,EAAAvC,GACA,GAAAwC,GAAAD,EAAAtB,WAAAK,GAAAtB,GACAyC,EAAAF,EAAAtB,WAAAK,GAAAtB,EAAA,EACAwC,GAAAjB,OAAAkB,GAEA,QAAAC,GAAAC,GACA,MAAA,4EACAA,EAAA,2RA3HA,GAAAf,GAAA7C,EAAAoC,MACAH,EAAAY,EAAAX,SAAA,SACAf,EAAA,EACAD,GAAA,EAAA,GACA0B,GAAA,EAOAhB,KAEA,KAAA3B,EAAA,2BACA,MAAA,sBAAAW,EAAA,uBAAA,SAAAX,EAAA,oBACA,MAAA,sBAAAW,EAAA,uBAAA,SAAAX,EAAA,oBACA,KAAA,8CAAAA,EAAA,2BACA,KAAA,OAEA,KAAAA,EAAA,2BACA,MAAA,sBAAAW,EAAA,wBAAA,SAAAX,EAAA,oBACA,MAAA,sBAAAW,EAAA,uBAAA,SAAAX,EAAA,oBACA,MAAA,sBAAAW,EAAA,6BAAA,SAAAX,EAAA,iBACA,MAAA,sBAAAW,EAAA,6BAAA,SAAAX,EAAA,iBA2GA4C,GAAAX,SAAA,WAAAI,OACAtC,EAAA,uEAAA2D,EAAA,KAAA,aAAAV,MAAA,WACA9B,GAAA,CAEA,KAAA,GADA0C,GAAA5B,EAAAC,WAAA4B,OACA7C,EAAA,EAAA4C,EAAA5C,EAAAA,IACA,IAAA,GAAAS,GAAA,EAAAT,EAAAS,EAAAA,IAAA,CACA,GAAA+B,GAAAxB,EAAAC,WAAAK,GAAAtB,GAAAiB,WAAAK,GAAAb,GACAgC,EAAAzB,EAAAC,WAAAK,GAAAb,GAAAQ,WAAAK,GAAAtB,GACA8C,EAAAL,EAAAM,MACAP,GAAAH,MAAAI,GACAK,EAAAT,MAAAG,OAIAnB,OACAtC,EAAA,6DAAA2D,EAAA,GAAA,aAAAV,MAAA,WACA/B,EAAA,EAAAC,IAAA,EACAc,EAAAC,WAAAvB,KAAA,WACA4C,EAAAvD,EAAAoC,MAAA,GACAQ,GACAW,EAAAvD,EAAAoC,MAAA,QAGAE,OACAtC,EAAA,uEAAAiD,MAAA7B,IACAkB,OACAtC,EAAA,0DAAA2D,EAAA,KAAA,aAAAV,MAAA,WACA/B,EAAAC,IAAA,EACAoC,EAAAtB,EAAA,GACAW,GACAW,EAAAtB,EAAA,MAEAK,OACAtC,EAAA,uEAAAiD,MAAA7B,IAEAyB,EAAAoB,GAAA,aAAA,QAAA,WACAjE,EAAAoC,MAAA8B,SAAA,aACArB,EAAAC,KAAA,iBAAA9C,EAAAoC,MAAAL,KAAA,aAAA,MAAAmC,SAAA,eACAD,GAAA,aAAA,QAAA,WACApB,EAAAC,KAAA,iBAAA9C,EAAAoC,MAAAL,KAAA,aAAA,MAAAoC,YAAA,aACAnE,EAAAoC,MAAA+B,YAAA","file":"index.js","sourcesContent":["$(function(){\r\n","function parseFormula(e) {\r\n\treturn \"<div class='formula'>\"+e\r\n\t\t.replace(/=/g,' = ')\r\n\t\t.replace(/(\\(.*\\)|\\w+)\\/(\\(.*\\)|\\w+)/,function(match,p1,p2){\r\n\t\t\tfunction e(p) {\r\n\t\t\t\tif (p.charAt(0)=='(') {\r\n\t\t\t\t\treturn \"<span class='aux'>(</span>\"+p.slice(1,-1)+\"<span class='aux'>)</span>\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn p;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn \"<span class='sfrac'>\"+\r\n\t\t\t\t\"<span class='num'>\"+e(p1)+\"</span>\"+\r\n\t\t\t\t\"<span class='aux'>/</span>\"+\r\n\t\t\t\t\"<span class='den'>\"+e(p2)+\"</span>\"+\r\n\t\t\t\"</span>\";\r\n\t\t})\r\n\t\t.replace(/\\b[A-Z]+\\b/g,function(match){\r\n\t\t\tvar vis=match;\r\n\t\t\tif (match=='PLR') {\r\n\t\t\t\tvis=\"LR<sub>+</sub>\";\r\n\t\t\t} else if (match=='NLR') {\r\n\t\t\t\tvis=\"LR<sub>−</sub>\";\r\n\t\t\t}\r\n\t\t\treturn \"<span class='term' data-term='\"+match+\"'>\"+vis+\"</span>\";\r\n\t\t})\r\n\t+\"</div>\";\r\n}\r\n","$('table.statistics-confusion').each(function(){\r\n\tvar tableNode=$(this);\r\n\tvar tbodyNode=tableNode.children('tbody');\r\n\tvar rcDir=0; // outcome headers on top?\r\n\tvar rcOrd=[0,0]; // outcomes swapped?, conditions swapped?\r\n\tvar isExpanded=false;\r\n\t//function wikipedia(block,url) {\r\n\t//\tif (url===undefined) url=\"https://en.wikipedia.org/wiki/\"+block.replace(/ /g,'_');\r\n\tfunction wikipedia(block) {\r\n\t\turl=\"https://en.wikipedia.org/wiki/\"+block.replace(/ /g,'_');\r\n\t\treturn \"<a href='\"+url+\"'>\"+block+\"</a>\";\r\n\t}\r\n\tvar expandData=[\r\n\t\t[ // new row\r\n\t\t\t[null,parseFormula(\"(FN+TN)/(TP+FP+FN+TN)\")],\r\n\t\t\t['FNR',\"<div class='label'>\"+wikipedia(\"False negative rate\")+\"</div>\"+parseFormula(\"FNR=FN/(TP+FN)\")],\r\n\t\t\t['FPR',\"<div class='label'>\"+wikipedia(\"False positive rate\")+\"</div>\"+parseFormula(\"FPR=FP/(FP+TN)\")],\r\n\t\t\t[null,\"<div class='label'>Overall error rate</div>\"+parseFormula(\"(FP+FN)/(TP+FP+FN+TN)\")],\r\n\t\t\t[null,\"\"] // not used\r\n\t\t],[ // new col\r\n\t\t\t[null,parseFormula(\"(FP+TN)/(TP+FP+FN+TN)\")],\r\n\t\t\t['FDR',\"<div class='label'>\"+wikipedia(\"False discovery rate\")+\"</div>\"+parseFormula(\"FDR=FP/(TP+FP)\")],\r\n\t\t\t['FOR',\"<div class='label'>\"+wikipedia(\"False omission rate\")+\"</div>\"+parseFormula(\"FOR=FN/(FN+TN)\")],\r\n\t\t\t['PLR',\"<div class='label'>\"+wikipedia(\"Positive likelihood ratio\")+\"</div>\"+parseFormula(\"PLR=TPR/FPR\")],\r\n\t\t\t['NLR',\"<div class='label'>\"+wikipedia(\"Negative likelihood ratio\")+\"</div>\"+parseFormula(\"NLR=FNR/TNR\")]\r\n\t\t]\r\n\t];\r\n\tfunction haveToSwap(dir,i) {\r\n\t\tif (i==1 || i==2) {\r\n\t\t\treturn ((i-1)^rcOrd[0]^rcOrd[1])&1;\r\n\t\t} else {\r\n\t\t\treturn rcOrd[rcDir^dir]&1;\r\n\t\t}\r\n\t}\r\n\tfunction expandTable() {\r\n\t\tfunction addCell(callOrd,dir,i,insertNormal,insertSwapped) {\r\n\t\t\tfunction makeCell() {\r\n\t\t\t\tvar j=i;\r\n\t\t\t\tif ((j==1 || j==2) && rcOrd[rcDir^dir^1]) {\r\n\t\t\t\t\tj^=1^2;\r\n\t\t\t\t} else if (callOrd && (j==3 || j==4) && rcOrd[rcDir^dir^1]) {\r\n\t\t\t\t\tj^=3^4;\r\n\t\t\t\t}\r\n\t\t\t\tvar cellData=expandData[rcDir^dir][j];\r\n\t\t\t\tvar cell=$(\"<td>\").html(cellData[1]);\r\n\t\t\t\tif (cellData[0]!==null) cell.attr('data-term',cellData[0]);\r\n\t\t\t\treturn cell;\r\n\t\t\t}\r\n\t\t\tvar cell=makeCell();\r\n\t\t\tif (haveToSwap(dir,i)) {\r\n\t\t\t\tinsertSwapped(cell);\r\n\t\t\t} else {\r\n\t\t\t\tinsertNormal(cell);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction addCol(callOrd) {\r\n\t\t\ttbodyNode.children().each(function(i){\r\n\t\t\t\tvar oldRow=$(this);\r\n\t\t\t\taddCell(callOrd,1,i,function(newCell){\r\n\t\t\t\t\toldRow.append(newCell);\r\n\t\t\t\t},function(newCell){\r\n\t\t\t\t\toldRow.children().eq(-1).before(newCell);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tfunction addRow(callOrd) {\r\n\t\t\tvar newRow=$(\"<tr>\");\r\n\t\t\ttbodyNode.append(newRow);\r\n\t\t\ttbodyNode.children().eq(-2).children().each(function(i){\r\n\t\t\t\tvar oldCell=$(this);\r\n\t\t\t\taddCell(callOrd,0,i,function(newCell){\r\n\t\t\t\t\tnewRow.append(newCell);\r\n\t\t\t\t},function(newCell){\r\n\t\t\t\t\toldCell.before(newCell);\r\n\t\t\t\t\tnewRow.append(oldCell);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (rcDir) {\r\n\t\t\taddCol(0);\r\n\t\t\taddRow(1);\r\n\t\t} else {\r\n\t\t\taddRow(0);\r\n\t\t\taddCol(1);\r\n\t\t}\r\n\t\tisExpanded=true;\r\n\t\ttableNode.find('button.add-r, button.add-c').text('−').attr('title','contract table').off().click(contractTable);\r\n\t}\r\n\tfunction contractTable() {\r\n\t\tfunction removeCol() {\r\n\t\t\ttbodyNode.children().each(function(i){\r\n\t\t\t\tvar oldRow=$(this);\r\n\t\t\t\toldRow.children().eq(haveToSwap(1,i)?-2:-1).remove();\r\n\t\t\t});\r\n\t\t}\r\n\t\tfunction removeRow() {\r\n\t\t\tvar oldRow=tbodyNode.children().eq(-2);\r\n\t\t\tvar newRow=tbodyNode.children().eq(-1);\r\n\t\t\tnewRow.children().each(function(i){\r\n\t\t\t\tif (haveToSwap(0,i)) {\r\n\t\t\t\t\tvar oldCell=$(this);\r\n\t\t\t\t\tvar newCell=oldRow.children().eq(i);\r\n\t\t\t\t\tnewCell.after(oldCell).remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tnewRow.remove();\r\n\t\t}\r\n\t\tif (rcDir) {\r\n\t\t\tremoveRow();\r\n\t\t\tremoveCol();\r\n\t\t} else {\r\n\t\t\tremoveCol();\r\n\t\t\tremoveRow();\r\n\t\t}\r\n\t\tisExpanded=false;\r\n\t\ttableNode.find('button.add-r, button.add-c').text('+').attr('title','expand table').off().click(expandTable);\r\n\t}\r\n\tfunction swapChildren(node,i) {\r\n\t\tvar c1=node.children().eq(i);\r\n\t\tvar c2=node.children().eq(i+1);\r\n\t\tc1.before(c2);\r\n\t}\r\n\tfunction drawSwapIcon(angle) {\r\n\t\treturn \"<svg width='100%' height='100%' viewBox='-2 -2 4 4'>\"+\r\n\t\t\t\"<g transform='rotate(\"+angle+\")'>\"+\r\n\t\t\t\"<path d='M -1 1 V 0 A 1 1 0 0 1 1 0 V 1' fill='none' stroke='#000' stroke-width='0.25' />\"+\r\n\t\t\t\"<path d='M -1.4 0.25 L -1 1 L -0.6 0.25 L -1 1.25 Z' stroke='#000' stroke-width='0.15' />\"+\r\n\t\t\t\"<path d='M  1.4 0.25 L  1 1 L  0.6 0.25 L  1 1.25 Z' stroke='#000' stroke-width='0.15' />\"+\r\n\t\t\t\"</g>\"+\r\n\t\t\"</svg>\";\r\n\t}\r\n\ttableNode.children('caption').append(\r\n\t\t$(\"<button type='button' class='swap-rc' title='swap rows and columns'>\"+drawSwapIcon(-45)+\"</button>\").click(function(){\r\n\t\t\trcDir^=1;\r\n\t\t\tvar n=tbodyNode.children().length;\r\n\t\t\tfor (var i=0;i<n;i++) {\r\n\t\t\t\tfor (var j=0;j<i;j++) {\r\n\t\t\t\t\tvar c1=tbodyNode.children().eq(i).children().eq(j);\r\n\t\t\t\t\tvar c2=tbodyNode.children().eq(j).children().eq(i);\r\n\t\t\t\t\tvar c2p=c2.prev();\r\n\t\t\t\t\tc1.after(c2);\r\n\t\t\t\t\tc2p.after(c1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t).append(\r\n\t\t$(\"<button type='button' class='swap-c' title='swap columns'>\"+drawSwapIcon(0)+\"</button>\").click(function(){\r\n\t\t\trcOrd[rcDir^1]^=1;\r\n\t\t\ttbodyNode.children().each(function(){\r\n\t\t\t\tswapChildren($(this),1);\r\n\t\t\t\tif (!isExpanded) return;\r\n\t\t\t\tswapChildren($(this),3);\r\n\t\t\t});\r\n\t\t})\r\n\t).append(\r\n\t\t$(\"<button type='button' class='add-c' title='expand table'>+</button>\").click(expandTable)\r\n\t).append(\r\n\t\t$(\"<button type='button' class='swap-r' title='swap rows'>\"+drawSwapIcon(-90)+\"</button>\").click(function(){\r\n\t\t\trcOrd[rcDir]^=1;\r\n\t\t\tswapChildren(tbodyNode,1);\r\n\t\t\tif (!isExpanded) return;\r\n\t\t\tswapChildren(tbodyNode,3);\r\n\t\t})\r\n\t).append(\r\n\t\t$(\"<button type='button' class='add-r' title='expand table'>+</button>\").click(expandTable)\r\n\t);\r\n\ttableNode.on('mouseenter','.term',function(){\r\n\t\t$(this).addClass('highlight');\r\n\t\ttableNode.find(\"td[data-term='\"+$(this).attr('data-term')+\"']\").addClass('highlight');\r\n\t}).on('mouseleave','.term',function(){\r\n\t\ttableNode.find(\"td[data-term='\"+$(this).attr('data-term')+\"']\").removeClass('highlight');\r\n\t\t$(this).removeClass('highlight');\r\n\t});\r\n});\r\n"],"sourceRoot":"/source/"}